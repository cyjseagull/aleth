#include "GasEstimator.h"


namespace dev
{
namespace eth
{

GasEstimator::GasEstimator(EVMSchedule _schedule)
    : m_schedule(_schedule) {}


uint32_t GasEstimator::estimateSpecialTierGas(Instruction instruction)
{
    switch (instruction)
    {
    case Instruction::SHA3:
        return m_schedule.sha3Gas + 3 * m_schedule.sha3WordGas;
    default:
        return 0;
    }
}

uint32_t GasEstimator::estimateGas(Instruction instruction)
{
    auto info = instructionInfo(instruction);

    switch (info.gasPriceTier)
    {
    case Tier::Special:
        return estimateSpecialTierGas(instruction);
    case Tier::Invalid:
        return 0;
    default:
        return m_schedule.tierStepGas[static_cast<int>(instruction)];
    }
}

}
}

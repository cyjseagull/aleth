#include "Program.h"

#include <stdexcept>


namespace dev
{
namespace eth
{

Program::Program() {}
Program::Program(std::vector<ProgramInstruction> _instructions)
    : m_instructions(_instructions) {}


void Program::addInstruction(ProgramInstruction pInstruction)
{
    auto info = instructionInfo(pInstruction.instruction());
    if (static_cast<uint64_t>(info.args) > m_stackSize)
    {
        throw std::runtime_error("not enough words on the stack");
    }
    auto stackDifference = info.ret - info.args;
    m_stackSize += stackDifference;
    m_instructions.push_back(pInstruction);
}

std::string Program::toBytecode() const
{
    std::stringstream sstream;
    for (auto& inst: m_instructions)
    {
    }
    return sstream.str();
}

}
}
